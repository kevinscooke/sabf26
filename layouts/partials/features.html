{{/* layouts/partials/features.html
     Usage A (Page context): {{ partial "features.html" . }}
       - Reads from .Params.features_heading, .Params.features (or .Params.benefits)
     Usage B (Dict context): {{ partial "features.html" (dict "title" "Benefits" "items" (slice "One" "Two")) }}
       - Reads from .title, .items (or optional keys "features"/"benefits")
*/}}

{{- $title := "Highlights" -}}
{{- $items := slice -}}

{{- /* If we're given a Page (has .Site), prefer .Params */ -}}
{{- if .Site -}}
  {{- with .Params.features_heading -}}
    {{- $title = . -}}
  {{- end -}}
  {{- with .Params.features -}}
    {{- $items = . -}}
  {{- else -}}
    {{- with .Params.benefits -}}
      {{- $items = . -}}
    {{- end -}}
  {{- end -}}

{{- /* Otherwise, assume we're given a dict/map with optional keys */ -}}
{{- else -}}
  {{- with .title -}}
    {{- $title = . -}}
  {{- end -}}
  {{- with .items -}}
    {{- $items = . -}}
  {{- else -}}
    {{- with (index . "features") -}}
      {{- $items = . -}}
    {{- else -}}
      {{- with (index . "benefits") -}}
        {{- $items = . -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}

{{- if gt (len $items) 0 -}}
<section class="border-t">
  <div class="mx-auto max-w-7xl px-4 py-16">
    <h2 class="text-3xl font-bold tracking-tight text-gray-900">{{ $title }}</h2>
    <ul class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      {{- range $items -}}
        <li class="flex items-start gap-3 rounded-2xl border bg-white p-5">
          <svg viewBox="0 0 24 24" class="mt-1 h-5 w-5" fill="currentColor" aria-hidden="true">
            <path d="M9 16.2l-3.5-3.5L4 14.2 9 19l11-11-1.5-1.5z"/>
          </svg>
          <span class="text-gray-700">{{ . }}</span>
        </li>
      {{- end -}}
    </ul>
  </div>
</section>
{{- end -}}
